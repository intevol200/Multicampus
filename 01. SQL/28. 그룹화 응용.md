---
__목차__
1. [ROLLUP](#1-ROLLUP)  
  1.1. [조합 열](#11-조합-열)
2. [CUBE](#2-CUBE)  
3. [GROUPING](#3-GROUPING)  
  3.1. [GROUPING_ID](#31-GROUPING_ID)  
  3.2. [GROUPING_SETS](#32-GROUPING_SETS)
---

## 1. ROLLUP
ROLLUP은 ```UNION ALL```을 사용하여 3번 그룹화한 것과 같은 결과
```SQL
SELECT DEPTNO, JOB, MGR, SUM(SAL)
FROM EMP
GROUP BY ROLLUP(DEPTNO, JOB, MGR);
```

### 1.1. 조합 열
어떠한 조합을 특정해보고 싶다면 괄호 ```( )``` 를 사용해 지정이 가능함
```SQL
SELECT DEPTNO, EMPNO, ENAME, SUM(SAL) 
FROM EMP 
GROUP BY ROLLUP(DEPTNO, (EMPNO, ENAME));


SELECT DEPTNO, EMPNO, ENAME, SUM(SAL) 
FROM EMP 
GROUP BY DEPTNO, ROLLUP((EMPNO, ENAME));


SELECT DEPTNO, EMPNO, ENAME, 
       CASE GROUPING(1) 
           WHEN 0 THEN SUM(SAL) 
                  ELSE ROUND(AVG(SAL),2)
       END AS SAL
FROM EMP 
GROUP BY DEPTNO, ROLLUP(1,(EMPNO,ENAME)); 
```


## 2. CUBE
모든 조합에 대해 그룹화
```SQL
SELECT DEPTNO, JOB, MGR, SUM(SAL)
FROM EMP 
GROUP BY CUBE(DEPTNO, JOB, MGR);
```


## 3. GROUPING
그룹화 된 상태 정보 출력 (그룹화 : 0, 아니면 1)
```SQL
-- 모든 부분에 대해 그룹화된 행 추출
SELECT DEPTNO, JOB, MGR, SUM(SAL), 
       GROUPING(DEPTNO), 
       GROUPING(JOB), 
       GROUPING(MGR) 
FROM EMP 
GROUP BY CUBE(DEPTNO, JOB, MGR)
HAVING GROUPING(DEPTNO) = 0
   AND GROUPING(JOB) = 0
   AND GROUPING(MGR) = 0;
```

### 3.1. GROUPING_ID
2진수로 구성된 GROUPING 정보를 10진수로 표현
```SQL
SELECT DEPTNO,JOB,MGR, SUM(SAL)
      ,GROUPING(DEPTNO)
  	  ,GROUPING(JOB)
	    ,GROUPING(MGR) 
	    ,GROUPING_ID(DEPTNO,JOB,MGR) 
FROM EMP 
GROUP BY CUBE(DEPTNO,JOB,MGR);


SELECT DEPTNO,JOB,MGR, SUM(SAL)
      ,GROUPING(DEPTNO)
  	  ,GROUPING(JOB)
	    ,GROUPING(MGR) 
	    ,GROUPING_ID(DEPTNO,JOB,MGR) 
FROM EMP 
GROUP BY CUBE(DEPTNO,JOB,MGR)
HAVING GROUPING_ID(DEPTNO,JOB,MGR) IN (1, 2) ;
```

### 3.2. GROUPING_SETS
```SQL
SELECT DEPTNO,JOB,MGR, SUM(SAL)
      ,GROUPING(DEPTNO)
	    ,GROUPING(JOB)
	    ,GROUPING(MGR) 
	    ,GROUPING_ID(DEPTNO,JOB,MGR) 
FROM EMP 
GROUP BY GROUPING SETS((DEPTNO,JOB)
                      ,(DEPTNO,MGR)
					            ,());
```
